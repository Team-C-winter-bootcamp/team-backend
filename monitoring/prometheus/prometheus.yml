# Prometheus 설정 파일
# 수집 간격 및 타겟 설정

global:
  scrape_interval: 15s      # 메트릭 수집 간격 (15초마다)
  evaluation_interval: 15s  # 규칙 평가 간격

# 알림 매니저 설정 (선택사항 - 나중에 추가 가능)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets: ['alertmanager:9093']

# 스크래핑 대상 설정
scrape_configs:
  # Prometheus 자체 모니터링
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']
    metrics_path: /metrics

  # Django 백엔드 메트릭
  - job_name: 'django'
    static_configs:
      - targets: ['backend:8000']  # Docker 네트워크 내 서비스명
    metrics_path: /metrics
    scrape_interval: 10s  # Django는 더 자주 수집

  # cAdvisor - Docker 컨테이너 메트릭 (CPU, Memory 등)
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['cadvisor:8080']
    scrape_interval: 10s
